/*! melktech-msh-apc-mobile 2018-08-09 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t){this.updownloading,this.scroll=t&&t.scroll?t.scroll:".scroll",this.resistance=t&&t.resistance?t.resistance:.3,this.outerScroller=t&&t.outerScroller?t.outerScroller:".outerScroller",this.loading=t&&t.loading?t.loading:"正在加载",this.upLoading=t&&t.upLoading?t.upLoading:"上拉加载",this.downLoading=t&&t.downLoading?t.downLoading:"下拉刷新",this.upFinish=t&&t.upFinish?t.upFinish:"没有更多了",this.downFinish=t&&t.downFinish?t.downFinish:"没有更多了",this.triggerHeight=t&&t.triggerHeight?t.triggerHeight:70,this.upFunction=t&&t.upFunction?t.upFunction:null,this.downFunction=t&&t.downFunction?t.downFunction:null,this.upFunctionParam=t&&t.upFunctionParam?t.upFunctionParam:null,this.downFunctionParam=t&&t.downFunctionParam?t.downFunctionParam:null,this.upLoadingStatus=t&&t.upLoadingStatus&&this.upFunction,this.downLoadingStatus=t&&t.downLoadingStatus&&this.downFunction,this.speed=t&&t.speed?t.speed:1,this.change=!1,this.intervalTime,this.touchStartY=0,this.touchStartX=0,this.scrollDom,this.outerScrollerDom,this.init()}t.prototype={constructor:t,init:function(){var e=this;e.setCss(),e.scrollDom=document.querySelector(e.scroll),e.outerScrollerDom=document.querySelector(e.outerScroller),e.outerScrollerDom.addEventListener("touchstart",function(t){t.preventDefault();var o=t.targetTouches[0];e.touchStartY=o.pageY*e.resistance,e.touchStartX=o.pageX*e.resistance,clearInterval(e.intervalTime)},!1),e.outerScrollerDom.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation();var o=t.targetTouches[0];if(Math.abs(o.pageY*e.resistance-e.touchStartY)>Math.abs(o.pageX*e.resistance-e.touchStartX)){e.change=!0;var n=e.scrollDom.offsetTop+o.pageY*e.resistance-e.touchStartY;e.scrollDom.style.top=n+"px",e.touchStartY=o.pageY*e.resistance;var i=e.scrollDom.offsetTop;0<i&&e.downLoadingStatus?($("#loading").html(e.downLoading),$("#loading").css({bottom:"auto",top:"-20px"}),$("#loading").fadeIn()):i<0&&e.upLoadingStatus?($("#loading").html(e.upLoading),$("#loading").css({bottom:"-20px",top:"auto"}),$("#loading").fadeIn()):0<i&&!e.downLoadingStatus?($("#loading").html(e.downFinish),$("#loading").css({bottom:"auto",top:"-20px"}),$("#loading").fadeIn()):i<0&&!e.upLoadingStatus&&($("#loading").html(e.upFinish),$("#loading").css({bottom:"-20px",top:"auto"}),$("#loading").fadeIn())}},!1),e.outerScrollerDom.addEventListener("touchend",function(t){if(t.preventDefault(),e.change){t.stopPropagation(),e.touchStartY=0;var o=e.scrollDom.offsetTop;o>e.triggerHeight&&e.downLoadingStatus&&($("#loading").html(e.loading),$("#loading").fadeIn(),$("#loading").css({bottom:"auto",top:"-20px"}),e.downFunction(e.downFunctionParam)),0<o&&(e.intervalTime&&clearInterval(e.intervalTime),e.intervalTime=setInterval(function(){var t=e.scrollDom.offsetTop-e.speed;t<0&&(t=0),e.scrollDom.style.top=t+"px",e.scrollDom.offsetTop<=0&&($(e.outerScroller).css("height",$(e.scroll).css("height")),$("#loading").fadeOut(),clearInterval(e.intervalTime))},1));var n=$(e.scroll).outerHeight(!0)-$(e.outerScroller).outerHeight(!0),i=e.scrollDom.offsetTop-(o+n);0<=n&&o+n<-1*e.triggerHeight&&e.upLoadingStatus&&o<0&&($("#loading").html(e.loading),$("#loading").fadeIn(),$("#loading").css({bottom:"-20px",top:"auto"}),e.upFunction(e.upFunctionParam)),e.scrollDom.offsetTop<i&&(e.intervalTime&&clearInterval(e.intervalTime),e.intervalTime=setInterval(function(){var t=e.scrollDom.offsetTop+e.speed;i<=t?t=i:1<=t&&(t=0),e.scrollDom.style.top=t+"px",(e.scrollDom.offsetTop>=i||n<0&&0<=e.scrollDom.offsetTop)&&($(e.outerScroller).css("height",$(e.scroll).css("height")),clearInterval(e.intervalTime),$("#loading").fadeOut())},1)),e.change=!1}})},setCss:function(){var t=this;$(t.scroll).css({width:"100%","margin-top":"0px",position:"absolute",left:"0px",padding:"0px",top:"0px"}),$(t.outerScroller).css({position:"relative",top:"0",bottom:"0",width:"100%",left:"0px"}),$(t.scroll).prepend("<div id='loading'>"+t.loading+"</div>")},remove:function(){$("#loading").hide()},callUpFinish:function(){this.upLoadingStatus=!1},callDownFinish:function(){this.downLoadingStatus=!1},reSetUpFunctionParam:function(t){this.upFunctionParam=t||null},reSetDownFunctionParam:function(t){this.downFunctionParam=t||null}},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):window.Updownloading=t}();
/*! melktech-msh-apc-mobile 最后修改于： 2018-08-09 */