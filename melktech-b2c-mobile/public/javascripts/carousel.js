/*! melktech-pds-mobile 2018-05-31 */

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){this.trigger=e.trigger?e.trigger:"#carousel",this.speed=e.speed?e.speed:400,this.timeout=e.timeout?e.timeout:4e3,this.height=e.height?e.height:4,this.type=e.type?e.type:1,this.rate=e.rate?e.rate:.8,this.count=0,this.preIdx=0,this.idx=0,this.nextIdx=1,this.doing=!1,this.time=0,this.minHeight,this.minWidth,this.minLeft,this.minTop,this.init()}e.prototype={constructor:e,init:function(){var t=this;return 0==$(t.trigger).length?(console.error("Carousel has been successfully installed, but no trigger found on your page."),!1):(t.count=$(this.trigger+" img").length,t.preIdx=t.count-1,2==t.type&&(t.minWidth=$(this.trigger).outerWidth(!0)*t.rate,t.minLeft=($(this.trigger).outerWidth(!0)-t.minWidth)/2,t.minHeight=t.height*t.rate,t.minTop=(t.height-t.minHeight)/2),t.nextIdx==t.count?(console.error("图片只有一个，不需要轮播"),!1):(t.setHtml(),t.setCss(),t.setActive(),$(t.trigger+" img:eq("+t.idx+")").css("left","0%"),$(t.trigger+" img:eq("+t.preIdx+")").css("left","-100%"),setInterval(function(){t.time+=t.timeout/2,!t.doing&&t.time>=t.timeout&&(t.doing=!0,t.time=0,2==t.type?t.swipeLeftFunction2():t.swipeLeftFunction())},t.timeout/2),$(t.trigger).on("swipeleft",function(e){e.preventDefault(),t.doing||(t.doing=!0,t.time=0,2==t.type?t.swipeLeftFunction2():t.swipeLeftFunction())}),void $(t.trigger).on("swiperight",function(e){e.preventDefault(),t.doing||(t.doing=!0,t.time=0,2==t.type?t.swipeRightFunction2():t.swipeRightFunction())})))},swipeLeftFunction:function(){var e=this;$(e.trigger+" img:eq("+e.idx+")").animate({left:"-100%"},e.speed),$(e.trigger+" img:eq("+e.nextIdx+")").animate({left:"0%"},e.speed,function(){e.doing=!1}),$(e.trigger+" img:eq("+e.preIdx+")").css("left","100%"),e.preIdx=e.idx,e.idx=e.nextIdx,e.nextIdx=e.nextIdx+1<e.count?e.nextIdx+1:0,e.setActive()},swipeRightFunction:function(){var e=this;$(e.trigger+" img:eq("+e.preIdx+")").animate({left:"0%"},e.speed,function(){e.doing=!1}),$(e.trigger+" img:eq("+e.idx+")").animate({left:"100%"},e.speed),e.nextIdx=e.idx,e.idx=e.preIdx,e.preIdx=e.preIdx-1<0?e.count-1:e.preIdx-1,$(e.trigger+" img:eq("+e.preIdx+")").css("left","-100%"),e.setActive()},swipeLeftFunction2:function(){var e=this;$(e.trigger+" img:eq("+e.idx+")").animate({marginLeft:e.minLeft+"px",marginTop:e.minTop+"rem",width:e.minWidth+"px",height:e.minHeight+"rem"},e.speed/3).animate({left:"-100%"},e.speed/3),$(e.trigger+" img:eq("+e.nextIdx+")").animate({marginLeft:e.minLeft+"px",marginTop:e.minTop+"rem",width:e.minWidth+"px",height:e.minHeight+"rem"},e.speed/3).animate({left:"0%"},e.speed/3).animate({margin:"0",width:"100%",height:e.height+"rem"},e.speed/3,function(){e.doing=!1}),$(e.trigger+" img:eq("+e.preIdx+")").css("left","100%"),e.preIdx=e.idx,e.idx=e.nextIdx,e.nextIdx=e.nextIdx+1<e.count?e.nextIdx+1:0,e.setActive()},swipeRightFunction2:function(){var e=this;$(e.trigger+" img:eq("+e.preIdx+")").animate({marginLeft:e.minLeft+"px",marginTop:e.minTop+"rem",width:e.minWidth+"px",height:e.minHeight+"rem"},e.speed/3).animate({left:"0%"},e.speed/3).animate({margin:"0",width:"100%",height:e.height+"rem"},e.speed/3,function(){e.doing=!1}),$(e.trigger+" img:eq("+e.idx+")").animate({marginLeft:e.minLeft+"px",marginTop:e.minTop+"rem",width:e.minWidth+"px",height:e.minHeight+"rem"},e.speed/3).animate({left:"100%"},e.speed/3),e.nextIdx=e.idx,e.idx=e.preIdx,e.preIdx=e.preIdx-1<0?e.count-1:e.preIdx-1,$(e.trigger+" img:eq("+e.preIdx+")").css("left","-100%"),e.setActive()},setActive:function(){var e=this;$(e.trigger+" .carouselCircle").removeClass("carouselActive"),$(e.trigger+" .carouselCircle:eq("+e.idx+")").addClass("carouselActive")},setHtml:function(){var i=this;$(i.trigger).append("<div class='carouselIdx'></div>"),$(i.trigger+" img").each(function(e,t){$(t).css("z-index",i.count-e),$(i.trigger+" .carouselIdx").append("<span class='carouselCircle'></span>")})},setCss:function(){var e=this,t="<style>"+e.trigger+"{width: 100%;height: "+e.height+"rem;}"+e.trigger+" img{width: 100%;height: "+e.height+"rem;position: absolute;left:100%;}"+e.trigger+" .carouselIdx{position: absolute;z-index: 871229;width: 100%;line-height: 0.2rem;height: .2rem;transform: translateY("+(e.height-.4)+"rem);text-align: center;}"+e.trigger+" .carouselCircle{display: inline-block;box-sizing: border-box;width: .2rem;height: .2rem;border:0.02rem solid #a1a1a1;border-radius: 50%;margin: 0 0.1rem;}"+e.trigger+" .carouselActive{background-color: #0f79d1;}\n</style>";0<$(e.trigger).closest("div[data-role='page']").length?$(e.trigger).closest("div[data-role='page']").prepend(t):$(e.trigger).closest("head").prepend(t)}},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:"function"==typeof define&&define.amd?define([],function(){return e}):window.Carousel=e}();
/*! melktech-pds-mobile 最后修改于： 2018-05-31 */