<!DOCTYPE html><html lang="en"><head></head><body><%-include("./commonJs.html")%><%-include("./commonCss.html")%><title>注册</title><link rel="stylesheet" href="<%=localurl%><%=projectUrl%>stylesheets/page/register.css"><script type="text/babel">$(document).ready(function(){ const timeDelay = 60;  const mobileCheck = /^1[3458][0-9]\d{8}$/;  const passwordCheck = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;  const shark = new SharkTip({ needShark: true}); const loader = new Loaders({style:"rectangle"}); let sendCodeComplete = false;  $(".oneline").on("vclick" ,".passwordShow",function (e) { e.preventDefault(); let thisJquery = this; $(thisJquery).removeClass("passwordShow"); $(thisJquery).addClass("passwordHide"); $(thisJquery).parents("div").find(".password").attr("type","text"); });  $(".oneline").on("vclick" ,".passwordHide",function (e) { e.preventDefault(); let thisJquery = this; $(thisJquery).removeClass("passwordHide"); $(thisJquery).addClass("passwordShow"); $(thisJquery).parents("div").find(".password").attr("type","password"); });  $(".oneline").on("vclick" ,"#sendCode" ,function (e) { e.preventDefault(); let thisJquery = this; let phone = $(thisJquery).parents("div").find(".phone").val(); if(!phone || !(mobileCheck.test(phone)) ){ shark.show("请输入正确的手机号"); return false; } loader.show(); let formData = new FormData(); formData.append("telPhoneNubmer",phone); $.ajax({ url: "<%=localurl%><%=projectUrl%>sendCode", type: 'POST', data: formData, async: true, cache: false, dataType: 'json', contentType: false, processData: false, success: (data) => { if(data.ret == "0"){ let thisDelay = timeDelay; $(thisJquery).html(`${thisDelay}s后重发`); $(thisJquery).removeAttr("id"); sendCodeComplete = true; let i = setInterval(function () { $(thisJquery).html(`${--thisDelay}s后重发`); if( !/^(0|[1-9][0-9]*)$/.test(thisDelay)){ $(thisJquery).attr("id","sendCode"); clearInterval(i); $(thisJquery).html("获取验证码"); } } ,1000); shark.show("成功"); }else{ shark.show(data.msg); } },complete: function(data) { loader.hide(); }, error: (data) => { shark.show("系统异常,请联系管理员"); } }); });  $(".notice").on("vclick",".pdf",function(e){ alert("此处应该有一个pdf的展示") }); $(".registerDiv").on("vclick", ".registerButton",function (e) { if(!sendCodeComplete){ shark.show("请先发送验证码"); return false; } let phone = $.trim($(".phone").val()); let identifyingCode = $.trim($(".identifyingCode").val()); let password = $.trim($(".password").val());  if(!phone || !(mobileCheck.test(phone)) ){ shark.show("请输入正确的手机号"); return false; }else if(!identifyingCode || identifyingCode.length != 6){ shark.show("请输入正确的验证码"); return false; }else if(!password || !passwordCheck.test(password) ){ shark.show("密码格式不正确"); return false; } loader.show(); let formData = new FormData(); formData.append("mobile",phone); formData.append("password" , password);  formData.append("captcha",identifyingCode); $.ajax({ url: "<%=localurl%><%=projectUrl%>registerSubmit", type: 'POST', data: formData, async: true, cache: false, dataType: 'json', contentType: false, processData: false, success: (data) => { if(data.ret == "0"){ shark.show("成功"); window.location.href="<%=localurl%><%=projectUrl%>planList"; }else{ shark.show(data.msg); } },complete: function(data) { loader.hide(); }, error: (data) => { shark.show("系统异常,请联系管理员"); } }); }); $(".loginDiv").on("vclick",".loginLink", function (e) { e.preventDefault(); window.location.href="<%=localurl%><%=projectUrl%>login"; }); });</script><div class="header"><span class="title">注册</span></div><div class="bodyContent"><div class="littleTip"><img src="<%=localurl%><%=projectUrl%>images/banner.png"></div><div class="personalInfo"><div class="ui-grid-b oneline"><span class="ui-block-a icon iconPhone"></span> <span class="ui-block-b input"><input type="number" name="phone" class="personalInfo phone" data-role="none" placeholder="请输入手机号" autocomplete="off"></span> <span id="sendCode" class="ui-block-c sendCode">发送验证码</span></div><div class="ui-grid-a oneline"><span class="ui-block-a icon iconIdentifyingcode"></span> <span class="ui-block-b input"><input type="text" name="identifyingCode" class="personalInfo identifyingCode" data-role="none" placeholder="请输入验证码" autocomplete="off"></span></div><div class="ui-grid-a oneline"><span class="ui-block-a icon iconPassword"></span> <span class="ui-block-b input"><input type="password" name="password" class="personalInfo password" data-role="none" placeholder="请输入密码(6-20位数字和字母)" autocomplete="off"></span> <span class="passwordShow"></span></div></div><div class="notice">点击注册即同意<span class="pdf">《XXX协议》</span></div><div class="registerDiv"><span class="registerButton">注册</span></div><div class="loginDiv"><span class="loginLink">已有账号请点这里登录</span></div></div></body></html>