<!DOCTYPE html><html lang="en"><head></head><body><%-include("./commonJs.html")%><%-include("./commonCss.html")%><title>修改密码</title><link rel="stylesheet" href="<%=localurl%><%=projectUrl%>stylesheets/page/modifyPassword.css"><script type="text/babel">$(document).ready(function(){ const shark = new SharkTip({ needShark: true}); const loader = new Loaders({style:"rectangle"}); const passwordCheck = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;   $(".header").on("vclick",".backIcon" , function (e) { e.preventDefault(); window.location.href = "<%=localurl%><%=projectUrl%>userCenter"; });  $(".oneline").on("vclick" ,".passwordShow",function (e) { e.preventDefault(); let thisJquery = this; $(thisJquery).removeClass("passwordShow"); $(thisJquery).addClass("passwordHide"); $(thisJquery).closest("div").find(".password").attr("type","text"); });  $(".oneline").on("vclick" ,".passwordHide",function (e) { e.preventDefault(); let thisJquery = this; $(thisJquery).removeClass("passwordHide"); $(thisJquery).addClass("passwordShow"); $(thisJquery).closest("div").find(".password").attr("type","password"); }); $(".bodyContent").on("vclick", ".submitButton", function (e) { e.preventDefault(); loader.show(); let currentPassword = $.trim($(".currentPassword").val());  let newPassword = $.trim($(".newPassword").val());  let confirmPassword = $.trim($(".confirmPassword").val());  if( !passwordCheck.test(currentPassword) ){ shark.show("请输入正确的原密码"); loader.hide(); return false; }else if( !passwordCheck.test(newPassword) ){ shark.show("新密码格式不正确"); loader.hide(); return false; }else if( !passwordCheck.test(confirmPassword) ){ shark.show("确认密码格式不正确"); loader.hide(); return false; }else if(newPassword != confirmPassword ){ shark.show("新密码和确认密码不统一"); loader.hide(); return false; } let formData = new FormData(); formData.append("currentPassword",currentPassword); formData.append("newPassword",newPassword); $.ajax({ url: "<%= localurl %><%= projectUrl %>modifyPassword", type: 'POST', data: formData, async: true, cache: false, dataType: 'json', contentType: false, processData: false, success: (data) => { if (data.ret == 0) { shark.show("更新成功"); } else { shark.show(data.msg); } }, complete: function (data) { loader.hide(); }, error: (data) => { shark.show("系统异常,请联系管理员"); } }); }); });</script><div class="header"><span class="icon-carat-b-onwer backIcon"></span> <span class="title">修改密码</span></div><div class="bodyContent"><div class="personalInfo"><div class="ui-grid-a oneline"><span class="ui-block-a icon iconPassword"></span> <span class="ui-block-b input"><input type="password" name="currentPassword" class="personalInfo password currentPassword" data-role="none" placeholder="请输入原密码(6-20位数字和字母)" autocomplete="off"></span> <span class="passwordShow"></span></div><div class="ui-grid-a oneline"><span class="ui-block-a icon iconPassword"></span> <span class="ui-block-b input"><input type="password" name="newPassword" class="personalInfo password newPassword" data-role="none" placeholder="请输入新密码(6-20位数字和字母)" autocomplete="off"></span> <span class="passwordShow"></span></div><div class="ui-grid-a oneline"><span class="ui-block-a icon iconPassword"></span> <span class="ui-block-b input"><input type="password" name="confirmPassword" class="personalInfo password confirmPassword" data-role="none" placeholder="请输入确认密码(6-20位数字和字母)" autocomplete="off"></span> <span class="passwordShow"></span></div></div><div class="submitDiv"><span class="submitButton">保存</span></div></div></body></html>